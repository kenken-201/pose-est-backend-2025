openapi: 3.1.0
info:
  title: Pose Estimation Backend
  description: "TensorFlow MoveNet \u3092\u4F7F\u7528\u3057\u305F\u59FF\u52E2\u63A8\
    \u5B9A\u30D0\u30C3\u30AF\u30A8\u30F3\u30C9 API"
  version: 1.0.0
paths:
  /api/v1/health:
    get:
      tags:
      - video
      summary: "\u30D8\u30EB\u30B9\u30C1\u30A7\u30C3\u30AF"
      description: "API \u306E\u7A3C\u50CD\u72B6\u614B\u3092\u78BA\u8A8D\u3057\u307E\
        \u3059\u3002"
      operationId: health_check_api_v1_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
  /api/v1/process:
    post:
      tags:
      - video
      summary: "\u52D5\u753B\u51E6\u7406"
      description: "\u52D5\u753B\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3001\
        \u59FF\u52E2\u63A8\u5B9A\u7D50\u679C\u3092\u542B\u3080\u52D5\u753B\u3092\u751F\
        \u6210\u3057\u307E\u3059\u3002"
      operationId: process_video_api_v1_process_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_process_video_api_v1_process_post'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProcessVideoResponse'
        '400':
          description: "\u7121\u52B9\u306A\u30EA\u30AF\u30A8\u30B9\u30C8"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: "\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u8D85\u904E"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: "\u30D1\u30E9\u30E1\u30FC\u30BF\u4E0D\u6B63"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "\u30B5\u30FC\u30D0\u30FC\u30A8\u30E9\u30FC"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '503':
          description: "\u30B5\u30FC\u30D3\u30B9\u5229\u7528\u4E0D\u53EF"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
components:
  schemas:
    Body_process_video_api_v1_process_post:
      properties:
        file:
          type: string
          format: binary
          title: File
          description: "\u51E6\u7406\u5BFE\u8C61\u306E\u52D5\u753B\u30D5\u30A1\u30A4\
            \u30EB"
        score_threshold:
          type: number
          maximum: 1.0
          minimum: 0.0
          title: Score Threshold
          description: "\u59FF\u52E2\u691C\u51FA\u306E\u95BE\u5024 (0.0-1.0)"
          default: 0.2
      type: object
      required:
      - file
      title: Body_process_video_api_v1_process_post
    ErrorDetail:
      properties:
        code:
          type: string
          title: Code
          description: "\u30A8\u30E9\u30FC\u30B3\u30FC\u30C9"
        message:
          type: string
          title: Message
          description: "\u30A8\u30E9\u30FC\u30E1\u30C3\u30BB\u30FC\u30B8"
      type: object
      required:
      - code
      - message
      title: ErrorDetail
      description: "\u30A8\u30E9\u30FC\u8A73\u7D30\u30B9\u30AD\u30FC\u30DE\u3002"
    ErrorResponse:
      properties:
        error:
          $ref: '#/components/schemas/ErrorDetail'
          description: "\u30A8\u30E9\u30FC\u8A73\u7D30"
      type: object
      required:
      - error
      title: ErrorResponse
      description: "\u30A8\u30E9\u30FC\u30EC\u30B9\u30DD\u30F3\u30B9\u30B9\u30AD\u30FC\
        \u30DE\u3002"
    HealthResponse:
      properties:
        status:
          type: string
          title: Status
          description: "\u30B9\u30C6\u30FC\u30BF\u30B9 (healthy)"
        version:
          type: string
          title: Version
          description: "API \u30D0\u30FC\u30B8\u30E7\u30F3"
      type: object
      required:
      - status
      - version
      title: HealthResponse
      description: "\u30D8\u30EB\u30B9\u30C1\u30A7\u30C3\u30AF\u306E\u30EC\u30B9\u30DD\
        \u30F3\u30B9\u30B9\u30AD\u30FC\u30DE\u3002"
    ProcessVideoResponse:
      properties:
        signed_url:
          type: string
          title: Signed Url
          description: "\u51E6\u7406\u6E08\u307F\u52D5\u753B\u306E\u7F72\u540D\u4ED8\
            \u304D URL"
        video_meta:
          $ref: '#/components/schemas/VideoMetaResponse'
          description: "\u52D5\u753B\u30E1\u30BF\u30C7\u30FC\u30BF"
        total_poses:
          type: integer
          title: Total Poses
          description: "\u691C\u51FA\u3055\u308C\u305F\u5EF6\u3079\u59FF\u52E2\u6570"
        processing_time_sec:
          type: number
          title: Processing Time Sec
          description: "\u51E6\u7406\u6642\u9593 (\u79D2)"
      type: object
      required:
      - signed_url
      - video_meta
      - total_poses
      - processing_time_sec
      title: ProcessVideoResponse
      description: "\u52D5\u753B\u51E6\u7406\u7D50\u679C\u306E\u30EC\u30B9\u30DD\u30F3\
        \u30B9\u30B9\u30AD\u30FC\u30DE\u3002"
    VideoMetaResponse:
      properties:
        width:
          type: integer
          title: Width
          description: "\u52D5\u753B\u306E\u5E45 (\u30D4\u30AF\u30BB\u30EB)"
        height:
          type: integer
          title: Height
          description: "\u52D5\u753B\u306E\u9AD8\u3055 (\u30D4\u30AF\u30BB\u30EB)"
        fps:
          type: number
          title: Fps
          description: "\u30D5\u30EC\u30FC\u30E0\u30EC\u30FC\u30C8"
        duration_sec:
          type: number
          title: Duration Sec
          description: "\u52D5\u753B\u6642\u9593 (\u79D2)"
        has_audio:
          type: boolean
          title: Has Audio
          description: "\u97F3\u58F0\u30C8\u30E9\u30C3\u30AF\u306E\u6709\u7121"
      type: object
      required:
      - width
      - height
      - fps
      - duration_sec
      - has_audio
      title: VideoMetaResponse
      description: "\u52D5\u753B\u30E1\u30BF\u30C7\u30FC\u30BF\u306E\u30EC\u30B9\u30DD\
        \u30F3\u30B9\u30B9\u30AD\u30FC\u30DE\u3002"
